[debug] [2023-09-17T18:32:22.584Z] ----------------------------------------------------------------------
[debug] [2023-09-17T18:32:22.586Z] Command:       C:\Program Files\nodejs\node.exe C:\Users\Luans\AppData\Roaming\npm\node_modules\firebase-tools\lib\bin\firebase.js emulators:start --only functions:codai --project dev
[debug] [2023-09-17T18:32:22.587Z] CLI Version:   12.4.8
[debug] [2023-09-17T18:32:22.587Z] Platform:      win32
[debug] [2023-09-17T18:32:22.588Z] Node Version:  v18.17.0
[debug] [2023-09-17T18:32:22.589Z] Time:          Sun Sep 17 2023 15:32:22 GMT-0300 (Brasilia Standard Time)
[debug] [2023-09-17T18:32:22.589Z] ----------------------------------------------------------------------
[debug] 
[debug] [2023-09-17T18:32:22.779Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2023-09-17T18:32:22.780Z] > authorizing via signed-in user (codaideveloper@gmail.com)
[info] i  emulators: Starting emulators: functions {"metadata":{"emulator":{"name":"hub"},"message":"Starting emulators: functions"}}
[debug] [2023-09-17T18:32:22.796Z] [logging] Logging Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2023-09-17T18:32:22.797Z] assigned listening specs for emulators {"user":{"hub":[{"address":"127.0.0.1","family":"IPv4","port":4400},{"address":"::1","family":"IPv6","port":4400}],"ui":[{"address":"127.0.0.1","family":"IPv4","port":4000},{"address":"::1","family":"IPv6","port":4000}],"logging":[{"address":"127.0.0.1","family":"IPv4","port":4500}]},"metadata":{"message":"assigned listening specs for emulators"}}
[debug] [2023-09-17T18:32:22.875Z] [hub] writing locator at C:\Users\Luans\AppData\Local\Temp\hub-codai-development.json
[debug] [2023-09-17T18:32:22.923Z] [functions] Functions Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2023-09-17T18:32:22.924Z] [eventarc] Eventarc Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2023-09-17T18:32:22.924Z] late-assigned ports for functions and eventarc emulators {"user":{"hub":[{"address":"127.0.0.1","family":"IPv4","port":4400},{"address":"::1","family":"IPv6","port":4400}],"ui":[{"address":"127.0.0.1","family":"IPv4","port":4000},{"address":"::1","family":"IPv6","port":4000}],"logging":[{"address":"127.0.0.1","family":"IPv4","port":4500}],"functions":[{"address":"127.0.0.1","family":"IPv4","port":5001}],"eventarc":[{"address":"127.0.0.1","family":"IPv4","port":9299}]},"metadata":{"message":"late-assigned ports for functions and eventarc emulators"}}
[warn] !  functions: The following emulators are not running, calls to these services from the Functions emulator will affect production: auth, firestore, database, hosting, pubsub, storage {"metadata":{"emulator":{"name":"functions"},"message":"The following emulators are not running, calls to these services from the Functions emulator will affect production: \u001b[1mauth, firestore, database, hosting, pubsub, storage\u001b[22m"}}
[debug] [2023-09-17T18:32:22.932Z] defaultcredentials: writing to file C:\Users\Luans\AppData\Roaming\firebase\codaideveloper_gmail_com_application_default_credentials.json
[debug] [2023-09-17T18:32:22.937Z] Setting GAC to C:\Users\Luans\AppData\Roaming\firebase\codaideveloper_gmail_com_application_default_credentials.json {"metadata":{"emulator":{"name":"functions"},"message":"Setting GAC to C:\\Users\\Luans\\AppData\\Roaming\\firebase\\codaideveloper_gmail_com_application_default_credentials.json"}}
[debug] [2023-09-17T18:32:22.939Z] > refreshing access token with scopes: []
[debug] [2023-09-17T18:32:22.942Z] >>> [apiv2][query] POST https://www.googleapis.com/oauth2/v3/token [none]
[debug] [2023-09-17T18:32:22.943Z] >>> [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2023-09-17T18:32:23.139Z] <<< [apiv2][status] POST https://www.googleapis.com/oauth2/v3/token 200
[debug] [2023-09-17T18:32:23.139Z] <<< [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2023-09-17T18:32:23.153Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/codai-development/adminSdkConfig [none]
[debug] [2023-09-17T18:32:23.592Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/codai-development/adminSdkConfig 200
[debug] [2023-09-17T18:32:23.592Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/codai-development/adminSdkConfig {"projectId":"codai-development","storageBucket":"codai-development.appspot.com","locationId":"us-central"}
[debug] [2023-09-17T18:32:23.636Z] Ignoring unsupported arg: auto_download {"metadata":{"emulator":{"name":"ui"},"message":"Ignoring unsupported arg: auto_download"}}
[debug] [2023-09-17T18:32:23.636Z] Ignoring unsupported arg: port {"metadata":{"emulator":{"name":"ui"},"message":"Ignoring unsupported arg: port"}}
[debug] [2023-09-17T18:32:23.637Z] Starting Emulator UI with command {"binary":"node","args":["C:\\Users\\Luans\\.cache\\firebase\\emulators\\ui-v1.11.7\\server\\server.js"],"optionalArgs":[],"joinArgs":false} {"metadata":{"emulator":{"name":"ui"},"message":"Starting Emulator UI with command {\"binary\":\"node\",\"args\":[\"C:\\\\Users\\\\Luans\\\\.cache\\\\firebase\\\\emulators\\\\ui-v1.11.7\\\\server\\\\server.js\"],\"optionalArgs\":[],\"joinArgs\":false}"}}
[info] i  ui: Emulator UI logging to ui-debug.log {"metadata":{"emulator":{"name":"ui"},"message":"Emulator UI logging to \u001b[1mui-debug.log\u001b[22m"}}
[debug] [2023-09-17T18:32:23.878Z] Web / API server started at 127.0.0.1:4000
 {"metadata":{"emulator":{"name":"ui"},"message":"Web / API server started at 127.0.0.1:4000\n"}}
[debug] [2023-09-17T18:32:23.879Z] Web / API server started at ::1:4000
 {"metadata":{"emulator":{"name":"ui"},"message":"Web / API server started at ::1:4000\n"}}
[info] i  functions: Watching "D:\CODAI-PROJECT\codai-backend" for Cloud Functions... {"metadata":{"emulator":{"name":"functions"},"message":"Watching \"D:\\CODAI-PROJECT\\codai-backend\" for Cloud Functions..."}}
[debug] [2023-09-17T18:32:23.950Z] Validating nodejs source
[debug] [2023-09-17T18:32:26.430Z] > [functions] package.json contents: {
  "name": "authenticated-json-api-functions",
  "description": "Cloud Functions for Firebase",
  "type": "module",
  "main": "index.mjs",
  "engines": {
    "node": "18"
  },
  "scripts": {
    "import-runtime": "firebase functions:config:get --project prod > .runtimeconfig.json",
    "start": "firebase emulators:start --only functions:codai --project dev",
    "shell": "firebase functions:shell",
    "deploy:dev": "firebase deploy --only functions:codai --project dev",
    "deploy:prod": "firebase deploy --only functions:codai --project prod",
    "logs": "firebase functions:log",
    "compile": "cp ../../../tsconfig.template.json ./tsconfig-compile.json && tsc --project tsconfig-compile.json"
  },
  "dependencies": {
    "@google-cloud/language": "^3.8.0",
    "axios": "^1.4.0",
    "bard-ai": "^2.0.3",
    "body-parser": "^1.20.2",
    "compression": "^1.7.4",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "express": "^4.18.2",
    "express-validator": "^7.0.1",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "helmet": "^7.0.0",
    "http-status-codes": "^2.2.0",
    "node-fetch": "^3.3.2",
    "openai": "^4.0.0",
    "response-time": "^2.3.2",
    "sanitizer": "^0.1.3"
  },
  "devDependencies": {
    "eslint": "^8.40.0",
    "mocha": "^10.2.0"
  }
}
[debug] [2023-09-17T18:32:26.431Z] Building nodejs source
[debug] [2023-09-17T18:32:26.431Z] Failed to find version of module node: reached end of search path D:\CODAI-PROJECT\codai-backend\node_modules
[info] +  functions: Using node@18 from host. 
[debug] [2023-09-17T18:32:26.433Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-09-17T18:32:26.443Z] Found firebase-functions binary at 'D:\CODAI-PROJECT\codai-backend\node_modules\.bin\firebase-functions'
[info] Serving at port 8275

[debug] [2023-09-17T18:32:33.444Z] Got response from /__/functions.yaml {"endpoints":{"codai":{"platform":"gcfv1","availableMemoryMb":256,"timeoutSeconds":60,"minInstances":1,"maxInstances":10,"ingressSettings":"ALLOW_ALL","serviceAccountEmail":null,"vpc":null,"region":["southamerica-east1"],"httpsTrigger":{},"entryPoint":"codai"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] shutdown requested via /__/quitquitquit

[info] +  functions: Loaded functions definitions from source: codai. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: codai."}}
[info] +  functions[southamerica-east1-codai]: http function initialized (http://127.0.0.1:5001/codai-development/southamerica-east1/codai). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/codai-development/southamerica-east1/codai)."}}
[info] 
┌─────────────────────────────────────────────────────────────┐
│ ✔  All emulators ready! It is now safe to connect your app. │
│ i  View Emulator UI at http://127.0.0.1:4000/               │
└─────────────────────────────────────────────────────────────┘

┌───────────┬────────────────┬─────────────────────────────────┐
│ Emulator  │ Host:Port      │ View in Emulator UI             │
├───────────┼────────────────┼─────────────────────────────────┤
│ Functions │ 127.0.0.1:5001 │ http://127.0.0.1:4000/functions │
└───────────┴────────────────┴─────────────────────────────────┘
  Emulator Hub running at 127.0.0.1:4400
  Other reserved ports: 4500

Issues? Report them at https://github.com/firebase/firebase-tools/issues and attach the *-debug.log files.
 
[debug] [2023-09-17T18:32:59.540Z] [work-queue] {"queuedWork":["/codai-development/southamerica-east1/codai/code/code-openai-2023-09-17T18:32:59.540Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-17T18:32:59.541Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/codai-development/southamerica-east1/codai/code/code-openai-2023-09-17T18:32:59.540Z"],"workRunningCount":1}
[debug] [2023-09-17T18:32:59.541Z] Accepted request POST /codai-development/southamerica-east1/codai/code/code-openai --> southamerica-east1-codai
[debug] [2023-09-17T18:32:59.543Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-09-17T18:32:59.544Z] [functions] Got req.url=/codai-development/southamerica-east1/codai/code/code-openai, mapping to path=/code/code-openai {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/codai-development/southamerica-east1/codai/code/code-openai, mapping to path=/code/code-openai"}}
[debug] [2023-09-17T18:32:59.568Z] [worker-pool] addWorker(southamerica-east1-codai) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(southamerica-east1-codai)"}}
[debug] [2023-09-17T18:32:59.569Z] [worker-pool] Adding worker with key southamerica-east1-codai, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key southamerica-east1-codai, total=1"}}
[debug] [2023-09-17T18:33:01.564Z] [runtime-status] [29180] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"D:\\CODAI-PROJECT\\codai-backend\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"[runtime-status] [29180] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"D:\\\\CODAI-PROJECT\\\\codai-backend\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2023-09-17T18:33:01.566Z] [runtime-status] [29180] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"D:\\CODAI-PROJECT\\codai-backend\\node_modules\\firebase-functions\\lib\\v1\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"[runtime-status] [29180] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"D:\\\\CODAI-PROJECT\\\\codai-backend\\\\node_modules\\\\firebase-functions\\\\lib\\\\v1\\\\index.js\"}"}}
[debug] [2023-09-17T18:33:01.567Z] [runtime-status] [29180] Found local functions config: D:\CODAI-PROJECT\codai-backend/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"[runtime-status] [29180] Found local functions config: D:\\CODAI-PROJECT\\codai-backend/.runtimeconfig.json"}}
[debug] [2023-09-17T18:33:01.567Z] [runtime-status] [29180] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"[runtime-status] [29180] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-09-17T18:33:01.568Z] [runtime-status] [29180] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"D:\\CODAI-PROJECT\\codai-backend\\node_modules\\firebase-functions\\lib\\v1\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"[runtime-status] [29180] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"D:\\\\CODAI-PROJECT\\\\codai-backend\\\\node_modules\\\\firebase-functions\\\\lib\\\\v1\\\\index.js\"}"}}
[debug] [2023-09-17T18:33:01.893Z] [runtime-status] [29180] Checked functions.config() {"config":{"node":{"npl":{"bard":"ZwidfWB4nOBqOU2J8Q0OH-5NpxZ-Mb5399kKevZypOpgp1ni1b7BWMOPSX_yklW3RI9QSw.","openai_key":"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"},"env":"development"},"hosting":{"firebase":{"next_public_firebase_project_id":"codai-development","next_public_firebase_auth_domain":"codai-development.firebaseapp.com","next_public_firebase_storage_bucket":"codai-development.appspot.com","next_public_firebase_api_key":"AIzaSyD3ySG8RyS6wix-O8noYsK9tPa1W2sPo3o","next_public_firebase_measurement_id":"G-M115V5N9DS","next_public_firebase_messaging_sender_id":"190262650042","next_public_firebase_app_id":"1:190262650042:web:d7b2c3fafbf815faf50e83"}}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"[runtime-status] [29180] Checked functions.config() {\"config\":{\"node\":{\"npl\":{\"bard\":\"ZwidfWB4nOBqOU2J8Q0OH-5NpxZ-Mb5399kKevZypOpgp1ni1b7BWMOPSX_yklW3RI9QSw.\",\"openai_key\":\"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\"},\"env\":\"development\"},\"hosting\":{\"firebase\":{\"next_public_firebase_project_id\":\"codai-development\",\"next_public_firebase_auth_domain\":\"codai-development.firebaseapp.com\",\"next_public_firebase_storage_bucket\":\"codai-development.appspot.com\",\"next_public_firebase_api_key\":\"AIzaSyD3ySG8RyS6wix-O8noYsK9tPa1W2sPo3o\",\"next_public_firebase_measurement_id\":\"G-M115V5N9DS\",\"next_public_firebase_messaging_sender_id\":\"190262650042\",\"next_public_firebase_app_id\":\"1:190262650042:web:d7b2c3fafbf815faf50e83\"}}}}"}}
[debug] [2023-09-17T18:33:01.893Z] [runtime-status] [29180] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"D:\\CODAI-PROJECT\\codai-backend\\node_modules\\firebase-functions\\lib\\v1\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"[runtime-status] [29180] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"D:\\\\CODAI-PROJECT\\\\codai-backend\\\\node_modules\\\\firebase-functions\\\\lib\\\\v1\\\\index.js\"}}"}}
[debug] [2023-09-17T18:33:01.894Z] [runtime-status] [29180] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"D:\\CODAI-PROJECT\\codai-backend\\node_modules\\firebase-functions\\lib\\v1\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"[runtime-status] [29180] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"D:\\\\CODAI-PROJECT\\\\codai-backend\\\\node_modules\\\\firebase-functions\\\\lib\\\\v1\\\\index.js\"}"}}
[debug] [2023-09-17T18:33:01.895Z] [runtime-status] [29180] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"D:\\CODAI-PROJECT\\codai-backend\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"[runtime-status] [29180] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"D:\\\\CODAI-PROJECT\\\\codai-backend\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2023-09-17T18:33:01.900Z] [runtime-status] [29180] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"D:\\CODAI-PROJECT\\codai-backend\\node_modules\\firebase-functions\\lib\\v1\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"[runtime-status] [29180] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"D:\\\\CODAI-PROJECT\\\\codai-backend\\\\node_modules\\\\firebase-functions\\\\lib\\\\v1\\\\index.js\"}"}}
[debug] [2023-09-17T18:33:01.900Z] [runtime-status] [29180] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"D:\\CODAI-PROJECT\\codai-backend\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"[runtime-status] [29180] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"D:\\\\CODAI-PROJECT\\\\codai-backend\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2023-09-17T18:33:02.354Z] [runtime-status] [29180] Functions runtime initialized. {"cwd":"D:\\CODAI-PROJECT\\codai-backend","node_version":"18.17.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"[runtime-status] [29180] Functions runtime initialized. {\"cwd\":\"D:\\\\CODAI-PROJECT\\\\codai-backend\",\"node_version\":\"18.17.0\"}"}}
[debug] [2023-09-17T18:33:02.354Z] [runtime-status] [29180] Listening to port: \\?\pipe\fire_emu_78ac580162b8cb72 {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"[runtime-status] [29180] Listening to port: \\\\?\\pipe\\fire_emu_78ac580162b8cb72"}}
[debug] [2023-09-17T18:33:02.400Z] [worker-southamerica-east1-codai-8711b3a1-7677-4f93-ba6d-584e09f991a2]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"[worker-southamerica-east1-codai-8711b3a1-7677-4f93-ba6d-584e09f991a2]: IDLE"}}
[debug] [2023-09-17T18:33:02.401Z] [worker-pool] submitRequest(triggerId=southamerica-east1-codai) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=southamerica-east1-codai)"}}
[info] i  functions: Beginning execution of "southamerica-east1-codai" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"Beginning execution of \"southamerica-east1-codai\""}}
[debug] [2023-09-17T18:33:02.402Z] [worker-southamerica-east1-codai-8711b3a1-7677-4f93-ba6d-584e09f991a2]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"[worker-southamerica-east1-codai-8711b3a1-7677-4f93-ba6d-584e09f991a2]: BUSY"}}
[info] >  Error verifying token: FirebaseAuthError: Firebase ID token has incorrect "aud" (audience) claim. Expected "codai-development" but got "codai-production". Make sure the ID token comes from the same Firebase project as the service account used to authenticate this SDK. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token. {"user":"Error verifying token: FirebaseAuthError: Firebase ID token has incorrect \"aud\" (audience) claim. Expected \"codai-development\" but got \"codai-production\". Make sure the ID token comes from the same Firebase project as the service account used to authenticate this SDK. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token.","metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"\u001b[90m> \u001b[39m Error verifying token: FirebaseAuthError: Firebase ID token has incorrect \"aud\" (audience) claim. Expected \"codai-development\" but got \"codai-production\". Make sure the ID token comes from the same Firebase project as the service account used to authenticate this SDK. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token."}}
[info] >      at FirebaseTokenVerifier.verifyContent (D:\CODAI-PROJECT\codai-backend\node_modules\firebase-admin\lib\auth\token-verifier.js:239:19) {"user":"    at FirebaseTokenVerifier.verifyContent (D:\\CODAI-PROJECT\\codai-backend\\node_modules\\firebase-admin\\lib\\auth\\token-verifier.js:239:19)","metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"\u001b[90m> \u001b[39m     at FirebaseTokenVerifier.verifyContent (D:\\CODAI-PROJECT\\codai-backend\\node_modules\\firebase-admin\\lib\\auth\\token-verifier.js:239:19)"}}
[info] >      at D:\CODAI-PROJECT\codai-backend\node_modules\firebase-admin\lib\auth\token-verifier.js:160:18 {"user":"    at D:\\CODAI-PROJECT\\codai-backend\\node_modules\\firebase-admin\\lib\\auth\\token-verifier.js:160:18","metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"\u001b[90m> \u001b[39m     at D:\\CODAI-PROJECT\\codai-backend\\node_modules\\firebase-admin\\lib\\auth\\token-verifier.js:160:18"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}}
[info] >      at async authenticateMiddleware (file:///D:/CODAI-PROJECT/codai-backend/src/middleware/authenticate-middleware.js:15:26) { {"user":"    at async authenticateMiddleware (file:///D:/CODAI-PROJECT/codai-backend/src/middleware/authenticate-middleware.js:15:26) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async authenticateMiddleware (file:///D:/CODAI-PROJECT/codai-backend/src/middleware/authenticate-middleware.js:15:26) {"}}
[info] >    errorInfo: { {"user":"  errorInfo: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"\u001b[90m> \u001b[39m   errorInfo: {"}}
[info] >      code: 'auth/argument-error', {"user":"    code: 'auth/argument-error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 'auth/argument-error',"}}
[info] >      message: 'Firebase ID token has incorrect "aud" (audience) claim. Expected "codai-development" but got "codai-production". Make sure the ID token comes from the same Firebase project as the service account used to authenticate this SDK. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token.' {"user":"    message: 'Firebase ID token has incorrect \"aud\" (audience) claim. Expected \"codai-development\" but got \"codai-production\". Make sure the ID token comes from the same Firebase project as the service account used to authenticate this SDK. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token.'","metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'Firebase ID token has incorrect \"aud\" (audience) claim. Expected \"codai-development\" but got \"codai-production\". Make sure the ID token comes from the same Firebase project as the service account used to authenticate this SDK. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token.'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    codePrefix: 'auth' {"user":"  codePrefix: 'auth'","metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"\u001b[90m> \u001b[39m   codePrefix: 'auth'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2023-09-17T18:33:02.565Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "southamerica-east1-codai" in 164.7544ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"Finished \"southamerica-east1-codai\" in 164.7544ms"}}
[debug] [2023-09-17T18:33:02.567Z] [worker-southamerica-east1-codai-8711b3a1-7677-4f93-ba6d-584e09f991a2]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"[worker-southamerica-east1-codai-8711b3a1-7677-4f93-ba6d-584e09f991a2]: IDLE"}}
[debug] [2023-09-17T18:33:02.567Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-09-17T18:33:02.568Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-09-17T18:33:02.568Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-17T18:33:34.762Z] [work-queue] {"queuedWork":["/codai-development/southamerica-east1/codai/code/code-openai-2023-09-17T18:33:34.761Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-17T18:33:34.762Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/codai-development/southamerica-east1/codai/code/code-openai-2023-09-17T18:33:34.761Z"],"workRunningCount":1}
[debug] [2023-09-17T18:33:34.762Z] Accepted request POST /codai-development/southamerica-east1/codai/code/code-openai --> southamerica-east1-codai
[debug] [2023-09-17T18:33:34.764Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-09-17T18:33:34.764Z] [functions] Got req.url=/codai-development/southamerica-east1/codai/code/code-openai, mapping to path=/code/code-openai {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/codai-development/southamerica-east1/codai/code/code-openai, mapping to path=/code/code-openai"}}
[debug] [2023-09-17T18:33:34.764Z] [worker-pool] submitRequest(triggerId=southamerica-east1-codai) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=southamerica-east1-codai)"}}
[info] i  functions: Beginning execution of "southamerica-east1-codai" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"Beginning execution of \"southamerica-east1-codai\""}}
[debug] [2023-09-17T18:33:34.766Z] [worker-southamerica-east1-codai-8711b3a1-7677-4f93-ba6d-584e09f991a2]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"[worker-southamerica-east1-codai-8711b3a1-7677-4f93-ba6d-584e09f991a2]: BUSY"}}
[warn] !  Google API requested!
   - URL: "https://oauth2.googleapis.com/token"
   - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"Google API requested!\n   - URL: \"https://oauth2.googleapis.com/token\"\n   - Be careful, this may be a production service."}}
[info] >  node:internal/process/promises:288 {"user":"node:internal/process/promises:288\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"\u001b[90m> \u001b[39m node:internal/process/promises:288\r"}}
[info] >              triggerUncaughtException(err, true /* fromPromise */); {"user":"            triggerUncaughtException(err, true /* fromPromise */);\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"\u001b[90m> \u001b[39m             triggerUncaughtException(err, true /* fromPromise */);\r"}}
[info] >              ^ {"user":"            ^\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"\u001b[90m> \u001b[39m             ^\r"}}
[info] >   {"user":"\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"\u001b[90m> \u001b[39m \r"}}
[info] >  [UnhandledPromiseRejection: This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). The promise rejected with the reason "#<Response>".] { {"user":"[UnhandledPromiseRejection: This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). The promise rejected with the reason \"#<Response>\".] {\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"\u001b[90m> \u001b[39m [UnhandledPromiseRejection: This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). The promise rejected with the reason \"#<Response>\".] {\r"}}
[info] >    code: 'ERR_UNHANDLED_REJECTION' {"user":"  code: 'ERR_UNHANDLED_REJECTION'\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'ERR_UNHANDLED_REJECTION'\r"}}
[info] >  } {"user":"}\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"\u001b[90m> \u001b[39m }\r"}}
[info] >   {"user":"\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"\u001b[90m> \u001b[39m \r"}}
[info] >  Node.js v18.17.0 {"user":"Node.js v18.17.0\r","metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v18.17.0\r"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-09-17T18:33:38.394Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-17T18:33:38.411Z] [worker-southamerica-east1-codai-8711b3a1-7677-4f93-ba6d-584e09f991a2]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"[worker-southamerica-east1-codai-8711b3a1-7677-4f93-ba6d-584e09f991a2]: exited"}}
[debug] [2023-09-17T18:33:38.412Z] [worker-southamerica-east1-codai-8711b3a1-7677-4f93-ba6d-584e09f991a2]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"[worker-southamerica-east1-codai-8711b3a1-7677-4f93-ba6d-584e09f991a2]: FINISHED"}}
[debug] [2023-09-17T18:33:47.364Z] File D:\CODAI-PROJECT\codai-backend\src\models\process-code-model.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File D:\\CODAI-PROJECT\\codai-backend\\src\\models\\process-code-model.js changed, reloading triggers"}}
[debug] [2023-09-17T18:33:48.365Z] Validating nodejs source
[debug] [2023-09-17T18:33:49.983Z] > [functions] package.json contents: {
  "name": "authenticated-json-api-functions",
  "description": "Cloud Functions for Firebase",
  "type": "module",
  "main": "index.mjs",
  "engines": {
    "node": "18"
  },
  "scripts": {
    "import-runtime": "firebase functions:config:get --project prod > .runtimeconfig.json",
    "start": "firebase emulators:start --only functions:codai --project dev",
    "shell": "firebase functions:shell",
    "deploy:dev": "firebase deploy --only functions:codai --project dev",
    "deploy:prod": "firebase deploy --only functions:codai --project prod",
    "logs": "firebase functions:log",
    "compile": "cp ../../../tsconfig.template.json ./tsconfig-compile.json && tsc --project tsconfig-compile.json"
  },
  "dependencies": {
    "@google-cloud/language": "^3.8.0",
    "axios": "^1.4.0",
    "bard-ai": "^2.0.3",
    "body-parser": "^1.20.2",
    "compression": "^1.7.4",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "express": "^4.18.2",
    "express-validator": "^7.0.1",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "helmet": "^7.0.0",
    "http-status-codes": "^2.2.0",
    "node-fetch": "^3.3.2",
    "openai": "^4.0.0",
    "response-time": "^2.3.2",
    "sanitizer": "^0.1.3"
  },
  "devDependencies": {
    "eslint": "^8.40.0",
    "mocha": "^10.2.0"
  }
}
[debug] [2023-09-17T18:33:49.983Z] Building nodejs source
[debug] [2023-09-17T18:33:49.983Z] Failed to find version of module node: reached end of search path D:\CODAI-PROJECT\codai-backend\node_modules
[info] +  functions: Using node@18 from host. 
[debug] [2023-09-17T18:33:49.985Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-09-17T18:33:49.992Z] Found firebase-functions binary at 'D:\CODAI-PROJECT\codai-backend\node_modules\.bin\firebase-functions'
[info] Serving at port 8540

[debug] [2023-09-17T18:33:50.809Z] Got response from /__/functions.yaml {"endpoints":{"codai":{"platform":"gcfv1","availableMemoryMb":256,"timeoutSeconds":60,"minInstances":1,"maxInstances":10,"ingressSettings":"ALLOW_ALL","serviceAccountEmail":null,"vpc":null,"region":["southamerica-east1"],"httpsTrigger":{},"entryPoint":"codai"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] shutdown requested via /__/quitquitquit

[info] +  functions: Loaded functions definitions from source: codai. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: codai."}}
[debug] [2023-09-17T18:34:01.736Z] File D:\CODAI-PROJECT\codai-backend\src\models\process-code-model.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File D:\\CODAI-PROJECT\\codai-backend\\src\\models\\process-code-model.js changed, reloading triggers"}}
[debug] [2023-09-17T18:34:01.943Z] File D:\CODAI-PROJECT\codai-backend\src\models\process-code-model.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File D:\\CODAI-PROJECT\\codai-backend\\src\\models\\process-code-model.js changed, reloading triggers"}}
[debug] [2023-09-17T18:34:02.108Z] File D:\CODAI-PROJECT\codai-backend\src\models\process-code-model.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File D:\\CODAI-PROJECT\\codai-backend\\src\\models\\process-code-model.js changed, reloading triggers"}}
[debug] [2023-09-17T18:34:02.305Z] File D:\CODAI-PROJECT\codai-backend\src\models\process-code-model.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File D:\\CODAI-PROJECT\\codai-backend\\src\\models\\process-code-model.js changed, reloading triggers"}}
[debug] [2023-09-17T18:34:03.321Z] Validating nodejs source
[debug] [2023-09-17T18:34:04.736Z] > [functions] package.json contents: {
  "name": "authenticated-json-api-functions",
  "description": "Cloud Functions for Firebase",
  "type": "module",
  "main": "index.mjs",
  "engines": {
    "node": "18"
  },
  "scripts": {
    "import-runtime": "firebase functions:config:get --project prod > .runtimeconfig.json",
    "start": "firebase emulators:start --only functions:codai --project dev",
    "shell": "firebase functions:shell",
    "deploy:dev": "firebase deploy --only functions:codai --project dev",
    "deploy:prod": "firebase deploy --only functions:codai --project prod",
    "logs": "firebase functions:log",
    "compile": "cp ../../../tsconfig.template.json ./tsconfig-compile.json && tsc --project tsconfig-compile.json"
  },
  "dependencies": {
    "@google-cloud/language": "^3.8.0",
    "axios": "^1.4.0",
    "bard-ai": "^2.0.3",
    "body-parser": "^1.20.2",
    "compression": "^1.7.4",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "express": "^4.18.2",
    "express-validator": "^7.0.1",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "helmet": "^7.0.0",
    "http-status-codes": "^2.2.0",
    "node-fetch": "^3.3.2",
    "openai": "^4.0.0",
    "response-time": "^2.3.2",
    "sanitizer": "^0.1.3"
  },
  "devDependencies": {
    "eslint": "^8.40.0",
    "mocha": "^10.2.0"
  }
}
[debug] [2023-09-17T18:34:04.736Z] Building nodejs source
[debug] [2023-09-17T18:34:04.736Z] Failed to find version of module node: reached end of search path D:\CODAI-PROJECT\codai-backend\node_modules
[info] +  functions: Using node@18 from host. 
[debug] [2023-09-17T18:34:04.737Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-09-17T18:34:04.744Z] Found firebase-functions binary at 'D:\CODAI-PROJECT\codai-backend\node_modules\.bin\firebase-functions'
[info] Serving at port 8642

[debug] [2023-09-17T18:34:05.523Z] Got response from /__/functions.yaml {"endpoints":{"codai":{"platform":"gcfv1","availableMemoryMb":256,"timeoutSeconds":60,"minInstances":1,"maxInstances":10,"ingressSettings":"ALLOW_ALL","serviceAccountEmail":null,"vpc":null,"region":["southamerica-east1"],"httpsTrigger":{},"entryPoint":"codai"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] shutdown requested via /__/quitquitquit

[info] +  functions: Loaded functions definitions from source: codai. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: codai."}}
[debug] [2023-09-17T18:34:18.436Z] [work-queue] {"queuedWork":["/codai-development/southamerica-east1/codai/code/code-openai-2023-09-17T18:34:18.436Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-17T18:34:18.438Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/codai-development/southamerica-east1/codai/code/code-openai-2023-09-17T18:34:18.436Z"],"workRunningCount":1}
[debug] [2023-09-17T18:34:18.439Z] Accepted request POST /codai-development/southamerica-east1/codai/code/code-openai --> southamerica-east1-codai
[debug] [2023-09-17T18:34:18.449Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-09-17T18:34:18.450Z] [functions] Got req.url=/codai-development/southamerica-east1/codai/code/code-openai, mapping to path=/code/code-openai {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/codai-development/southamerica-east1/codai/code/code-openai, mapping to path=/code/code-openai"}}
[debug] [2023-09-17T18:34:18.450Z] [worker-pool] Cleaned up workers for southamerica-east1-codai: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for southamerica-east1-codai: 1 --> 0"}}
[debug] [2023-09-17T18:34:18.491Z] [worker-pool] addWorker(southamerica-east1-codai) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(southamerica-east1-codai)"}}
[debug] [2023-09-17T18:34:18.492Z] [worker-pool] Adding worker with key southamerica-east1-codai, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key southamerica-east1-codai, total=1"}}
[debug] [2023-09-17T18:34:20.299Z] [runtime-status] [11396] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"D:\\CODAI-PROJECT\\codai-backend\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"[runtime-status] [11396] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"D:\\\\CODAI-PROJECT\\\\codai-backend\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2023-09-17T18:34:20.301Z] [runtime-status] [11396] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"D:\\CODAI-PROJECT\\codai-backend\\node_modules\\firebase-functions\\lib\\v1\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"[runtime-status] [11396] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"D:\\\\CODAI-PROJECT\\\\codai-backend\\\\node_modules\\\\firebase-functions\\\\lib\\\\v1\\\\index.js\"}"}}
[debug] [2023-09-17T18:34:20.301Z] [runtime-status] [11396] Found local functions config: D:\CODAI-PROJECT\codai-backend/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"[runtime-status] [11396] Found local functions config: D:\\CODAI-PROJECT\\codai-backend/.runtimeconfig.json"}}
[debug] [2023-09-17T18:34:20.302Z] [runtime-status] [11396] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"[runtime-status] [11396] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-09-17T18:34:20.302Z] [runtime-status] [11396] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"D:\\CODAI-PROJECT\\codai-backend\\node_modules\\firebase-functions\\lib\\v1\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"[runtime-status] [11396] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"D:\\\\CODAI-PROJECT\\\\codai-backend\\\\node_modules\\\\firebase-functions\\\\lib\\\\v1\\\\index.js\"}"}}
[debug] [2023-09-17T18:34:20.611Z] [runtime-status] [11396] Checked functions.config() {"config":{"node":{"npl":{"bard":"ZwidfWB4nOBqOU2J8Q0OH-5NpxZ-Mb5399kKevZypOpgp1ni1b7BWMOPSX_yklW3RI9QSw.","openai_key":"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"},"env":"development"},"hosting":{"firebase":{"next_public_firebase_project_id":"codai-development","next_public_firebase_auth_domain":"codai-development.firebaseapp.com","next_public_firebase_storage_bucket":"codai-development.appspot.com","next_public_firebase_api_key":"AIzaSyD3ySG8RyS6wix-O8noYsK9tPa1W2sPo3o","next_public_firebase_measurement_id":"G-M115V5N9DS","next_public_firebase_messaging_sender_id":"190262650042","next_public_firebase_app_id":"1:190262650042:web:d7b2c3fafbf815faf50e83"}}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"[runtime-status] [11396] Checked functions.config() {\"config\":{\"node\":{\"npl\":{\"bard\":\"ZwidfWB4nOBqOU2J8Q0OH-5NpxZ-Mb5399kKevZypOpgp1ni1b7BWMOPSX_yklW3RI9QSw.\",\"openai_key\":\"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\"},\"env\":\"development\"},\"hosting\":{\"firebase\":{\"next_public_firebase_project_id\":\"codai-development\",\"next_public_firebase_auth_domain\":\"codai-development.firebaseapp.com\",\"next_public_firebase_storage_bucket\":\"codai-development.appspot.com\",\"next_public_firebase_api_key\":\"AIzaSyD3ySG8RyS6wix-O8noYsK9tPa1W2sPo3o\",\"next_public_firebase_measurement_id\":\"G-M115V5N9DS\",\"next_public_firebase_messaging_sender_id\":\"190262650042\",\"next_public_firebase_app_id\":\"1:190262650042:web:d7b2c3fafbf815faf50e83\"}}}}"}}
[debug] [2023-09-17T18:34:20.612Z] [runtime-status] [11396] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"D:\\CODAI-PROJECT\\codai-backend\\node_modules\\firebase-functions\\lib\\v1\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"[runtime-status] [11396] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"D:\\\\CODAI-PROJECT\\\\codai-backend\\\\node_modules\\\\firebase-functions\\\\lib\\\\v1\\\\index.js\"}}"}}
[debug] [2023-09-17T18:34:20.613Z] [runtime-status] [11396] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"D:\\CODAI-PROJECT\\codai-backend\\node_modules\\firebase-functions\\lib\\v1\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"[runtime-status] [11396] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"D:\\\\CODAI-PROJECT\\\\codai-backend\\\\node_modules\\\\firebase-functions\\\\lib\\\\v1\\\\index.js\"}"}}
[debug] [2023-09-17T18:34:20.614Z] [runtime-status] [11396] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"D:\\CODAI-PROJECT\\codai-backend\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"[runtime-status] [11396] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"D:\\\\CODAI-PROJECT\\\\codai-backend\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2023-09-17T18:34:20.617Z] [runtime-status] [11396] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"D:\\CODAI-PROJECT\\codai-backend\\node_modules\\firebase-functions\\lib\\v1\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"[runtime-status] [11396] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"D:\\\\CODAI-PROJECT\\\\codai-backend\\\\node_modules\\\\firebase-functions\\\\lib\\\\v1\\\\index.js\"}"}}
[debug] [2023-09-17T18:34:20.617Z] [runtime-status] [11396] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"D:\\CODAI-PROJECT\\codai-backend\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"[runtime-status] [11396] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"D:\\\\CODAI-PROJECT\\\\codai-backend\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2023-09-17T18:34:20.952Z] [runtime-status] [11396] Functions runtime initialized. {"cwd":"D:\\CODAI-PROJECT\\codai-backend","node_version":"18.17.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"[runtime-status] [11396] Functions runtime initialized. {\"cwd\":\"D:\\\\CODAI-PROJECT\\\\codai-backend\",\"node_version\":\"18.17.0\"}"}}
[debug] [2023-09-17T18:34:20.952Z] [runtime-status] [11396] Listening to port: \\?\pipe\fire_emu_de862bb103ca928b {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"[runtime-status] [11396] Listening to port: \\\\?\\pipe\\fire_emu_de862bb103ca928b"}}
[debug] [2023-09-17T18:34:21.026Z] [worker-southamerica-east1-codai-584ca938-1d99-4e6d-ac20-2546086932f1]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"[worker-southamerica-east1-codai-584ca938-1d99-4e6d-ac20-2546086932f1]: IDLE"}}
[debug] [2023-09-17T18:34:21.026Z] [worker-pool] submitRequest(triggerId=southamerica-east1-codai) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=southamerica-east1-codai)"}}
[info] i  functions: Beginning execution of "southamerica-east1-codai" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"Beginning execution of \"southamerica-east1-codai\""}}
[debug] [2023-09-17T18:34:21.027Z] [worker-southamerica-east1-codai-584ca938-1d99-4e6d-ac20-2546086932f1]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"[worker-southamerica-east1-codai-584ca938-1d99-4e6d-ac20-2546086932f1]: BUSY"}}
[warn] !  Google API requested!
   - URL: "https://oauth2.googleapis.com/token"
   - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"Google API requested!\n   - URL: \"https://oauth2.googleapis.com/token\"\n   - Be careful, this may be a production service."}}
[debug] [2023-09-17T18:34:28.418Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "southamerica-east1-codai" in 7390.8799ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"Finished \"southamerica-east1-codai\" in 7390.8799ms"}}
[debug] [2023-09-17T18:34:28.419Z] [worker-southamerica-east1-codai-584ca938-1d99-4e6d-ac20-2546086932f1]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"[worker-southamerica-east1-codai-584ca938-1d99-4e6d-ac20-2546086932f1]: IDLE"}}
[debug] [2023-09-17T18:34:28.419Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-09-17T18:34:28.419Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-09-17T18:34:28.420Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-17T18:35:04.107Z] [work-queue] {"queuedWork":["/codai-development/southamerica-east1/codai/code/code-openai-2023-09-17T18:35:04.107Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-17T18:35:04.107Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/codai-development/southamerica-east1/codai/code/code-openai-2023-09-17T18:35:04.107Z"],"workRunningCount":1}
[debug] [2023-09-17T18:35:04.107Z] Accepted request POST /codai-development/southamerica-east1/codai/code/code-openai --> southamerica-east1-codai
[debug] [2023-09-17T18:35:04.110Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-09-17T18:35:04.111Z] [functions] Got req.url=/codai-development/southamerica-east1/codai/code/code-openai, mapping to path=/code/code-openai {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/codai-development/southamerica-east1/codai/code/code-openai, mapping to path=/code/code-openai"}}
[debug] [2023-09-17T18:35:04.111Z] [worker-pool] submitRequest(triggerId=southamerica-east1-codai) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=southamerica-east1-codai)"}}
[info] i  functions: Beginning execution of "southamerica-east1-codai" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"Beginning execution of \"southamerica-east1-codai\""}}
[debug] [2023-09-17T18:35:04.112Z] [worker-southamerica-east1-codai-584ca938-1d99-4e6d-ac20-2546086932f1]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"[worker-southamerica-east1-codai-584ca938-1d99-4e6d-ac20-2546086932f1]: BUSY"}}
[debug] [2023-09-17T18:35:16.467Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "southamerica-east1-codai" in 12355.9147ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"Finished \"southamerica-east1-codai\" in 12355.9147ms"}}
[debug] [2023-09-17T18:35:16.468Z] [worker-southamerica-east1-codai-584ca938-1d99-4e6d-ac20-2546086932f1]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"[worker-southamerica-east1-codai-584ca938-1d99-4e6d-ac20-2546086932f1]: IDLE"}}
[debug] [2023-09-17T18:35:16.468Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-09-17T18:35:16.468Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-09-17T18:35:16.468Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-17T19:30:34.834Z] [work-queue] {"queuedWork":["/codai-development/southamerica-east1/codai/code/code-openai-2023-09-17T19:30:34.834Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-17T19:30:34.835Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/codai-development/southamerica-east1/codai/code/code-openai-2023-09-17T19:30:34.834Z"],"workRunningCount":1}
[debug] [2023-09-17T19:30:34.836Z] Accepted request POST /codai-development/southamerica-east1/codai/code/code-openai --> southamerica-east1-codai
[debug] [2023-09-17T19:30:34.838Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-09-17T19:30:34.839Z] [functions] Got req.url=/codai-development/southamerica-east1/codai/code/code-openai, mapping to path=/code/code-openai {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/codai-development/southamerica-east1/codai/code/code-openai, mapping to path=/code/code-openai"}}
[debug] [2023-09-17T19:30:34.839Z] [worker-pool] submitRequest(triggerId=southamerica-east1-codai) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=southamerica-east1-codai)"}}
[info] i  functions: Beginning execution of "southamerica-east1-codai" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"Beginning execution of \"southamerica-east1-codai\""}}
[debug] [2023-09-17T19:30:34.840Z] [worker-southamerica-east1-codai-584ca938-1d99-4e6d-ac20-2546086932f1]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"[worker-southamerica-east1-codai-584ca938-1d99-4e6d-ac20-2546086932f1]: BUSY"}}
[debug] [2023-09-17T19:31:01.773Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "southamerica-east1-codai" in 26933.8291ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"Finished \"southamerica-east1-codai\" in 26933.8291ms"}}
[debug] [2023-09-17T19:31:01.774Z] [worker-southamerica-east1-codai-584ca938-1d99-4e6d-ac20-2546086932f1]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"[worker-southamerica-east1-codai-584ca938-1d99-4e6d-ac20-2546086932f1]: IDLE"}}
[debug] [2023-09-17T19:31:01.775Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-09-17T19:31:01.775Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-09-17T19:31:01.775Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-17T19:32:16.312Z] File D:\CODAI-PROJECT\codai-backend\src\prompts\prompt-chatgpt.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File D:\\CODAI-PROJECT\\codai-backend\\src\\prompts\\prompt-chatgpt.js changed, reloading triggers"}}
[debug] [2023-09-17T19:32:17.322Z] Validating nodejs source
[debug] [2023-09-17T19:32:20.899Z] > [functions] package.json contents: {
  "name": "authenticated-json-api-functions",
  "description": "Cloud Functions for Firebase",
  "type": "module",
  "main": "index.mjs",
  "engines": {
    "node": "18"
  },
  "scripts": {
    "import-runtime": "firebase functions:config:get --project prod > .runtimeconfig.json",
    "start": "firebase emulators:start --only functions:codai --project dev",
    "shell": "firebase functions:shell",
    "deploy:dev": "firebase deploy --only functions:codai --project dev",
    "deploy:prod": "firebase deploy --only functions:codai --project prod",
    "logs": "firebase functions:log",
    "compile": "cp ../../../tsconfig.template.json ./tsconfig-compile.json && tsc --project tsconfig-compile.json"
  },
  "dependencies": {
    "@google-cloud/language": "^3.8.0",
    "axios": "^1.4.0",
    "bard-ai": "^2.0.3",
    "body-parser": "^1.20.2",
    "compression": "^1.7.4",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "express": "^4.18.2",
    "express-validator": "^7.0.1",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "helmet": "^7.0.0",
    "http-status-codes": "^2.2.0",
    "node-fetch": "^3.3.2",
    "openai": "^4.0.0",
    "response-time": "^2.3.2",
    "sanitizer": "^0.1.3"
  },
  "devDependencies": {
    "eslint": "^8.40.0",
    "mocha": "^10.2.0"
  }
}
[debug] [2023-09-17T19:32:20.899Z] Building nodejs source
[debug] [2023-09-17T19:32:20.899Z] Failed to find version of module node: reached end of search path D:\CODAI-PROJECT\codai-backend\node_modules
[info] +  functions: Using node@18 from host. 
[debug] [2023-09-17T19:32:20.900Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-09-17T19:32:20.907Z] Found firebase-functions binary at 'D:\CODAI-PROJECT\codai-backend\node_modules\.bin\firebase-functions'
[info] Serving at port 8646

[debug] [2023-09-17T19:32:21.627Z] Got response from /__/functions.yaml {"endpoints":{"codai":{"platform":"gcfv1","availableMemoryMb":256,"timeoutSeconds":60,"minInstances":1,"maxInstances":10,"ingressSettings":"ALLOW_ALL","serviceAccountEmail":null,"vpc":null,"region":["southamerica-east1"],"httpsTrigger":{},"entryPoint":"codai"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] shutdown requested via /__/quitquitquit

[info] +  functions: Loaded functions definitions from source: codai. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: codai."}}
[debug] [2023-09-17T19:32:21.644Z] [worker-pool] Shutting down IDLE worker (southamerica-east1-codai) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (southamerica-east1-codai)"}}
[debug] [2023-09-17T19:32:21.644Z] [worker-southamerica-east1-codai-584ca938-1d99-4e6d-ac20-2546086932f1]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"[worker-southamerica-east1-codai-584ca938-1d99-4e6d-ac20-2546086932f1]: FINISHING"}}
[debug] [2023-09-17T19:32:21.660Z] [worker-southamerica-east1-codai-584ca938-1d99-4e6d-ac20-2546086932f1]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"[worker-southamerica-east1-codai-584ca938-1d99-4e6d-ac20-2546086932f1]: exited"}}
[debug] [2023-09-17T19:32:21.661Z] [worker-southamerica-east1-codai-584ca938-1d99-4e6d-ac20-2546086932f1]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"[worker-southamerica-east1-codai-584ca938-1d99-4e6d-ac20-2546086932f1]: FINISHED"}}
[debug] [2023-09-17T19:32:22.631Z] [work-queue] {"queuedWork":["/codai-development/southamerica-east1/codai/code/code-openai-2023-09-17T19:32:22.631Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-09-17T19:32:22.631Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/codai-development/southamerica-east1/codai/code/code-openai-2023-09-17T19:32:22.631Z"],"workRunningCount":1}
[debug] [2023-09-17T19:32:22.631Z] Accepted request POST /codai-development/southamerica-east1/codai/code/code-openai --> southamerica-east1-codai
[debug] [2023-09-17T19:32:22.634Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-09-17T19:32:22.634Z] [functions] Got req.url=/codai-development/southamerica-east1/codai/code/code-openai, mapping to path=/code/code-openai {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/codai-development/southamerica-east1/codai/code/code-openai, mapping to path=/code/code-openai"}}
[debug] [2023-09-17T19:32:22.634Z] [worker-pool] Cleaned up workers for southamerica-east1-codai: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for southamerica-east1-codai: 1 --> 0"}}
[debug] [2023-09-17T19:32:22.657Z] [worker-pool] addWorker(southamerica-east1-codai) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(southamerica-east1-codai)"}}
[debug] [2023-09-17T19:32:22.658Z] [worker-pool] Adding worker with key southamerica-east1-codai, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key southamerica-east1-codai, total=1"}}
[debug] [2023-09-17T19:32:24.528Z] [runtime-status] [14996] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"D:\\CODAI-PROJECT\\codai-backend\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"[runtime-status] [14996] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"D:\\\\CODAI-PROJECT\\\\codai-backend\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2023-09-17T19:32:24.530Z] [runtime-status] [14996] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"D:\\CODAI-PROJECT\\codai-backend\\node_modules\\firebase-functions\\lib\\v1\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"[runtime-status] [14996] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"D:\\\\CODAI-PROJECT\\\\codai-backend\\\\node_modules\\\\firebase-functions\\\\lib\\\\v1\\\\index.js\"}"}}
[debug] [2023-09-17T19:32:24.531Z] [runtime-status] [14996] Found local functions config: D:\CODAI-PROJECT\codai-backend/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"[runtime-status] [14996] Found local functions config: D:\\CODAI-PROJECT\\codai-backend/.runtimeconfig.json"}}
[debug] [2023-09-17T19:32:24.532Z] [runtime-status] [14996] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"[runtime-status] [14996] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-09-17T19:32:24.534Z] [runtime-status] [14996] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"D:\\CODAI-PROJECT\\codai-backend\\node_modules\\firebase-functions\\lib\\v1\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"southamerica-east1-codai"},"extension":{},"message":"[runtime-status] [14996] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"D:\\\\CODAI-PROJECT\\\\codai-backend\\\\node_modules\\\\firebase-functions\\\\lib\\\\v1\\\\index.js\"}"}}
